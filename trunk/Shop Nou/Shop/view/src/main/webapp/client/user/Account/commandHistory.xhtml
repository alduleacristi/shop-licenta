<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<title>View history</title>
</h:head>
<h:body>


	<ui:composition template="/resources/template/template.xhtml">
		<ui:define name="menu">
			<ui:include src="/resources/template/client/user/menuBox.xhtml"></ui:include>
		</ui:define>

		<ui:define name="cart">
			<ui:include src="/resources/template/client/user/cartBox.xhtml"></ui:include>
		</ui:define>


		<ui:define name="search">
			<ui:include src="/resources/template/client/searchBox.xhtml"></ui:include>
		</ui:define>

		<ui:define name="categories">
			<ui:include src="/resources/template/client/user/verticalMenu.xhtml"></ui:include>
		</ui:define>

		<ui:define name="mainContent">
			<h:form id="commandHistory">
				<center>
					<p:carousel value="#{CommandBean.commands}" vertical="true" var="c"
						rendered="#{CommandBean.existCommands}" numVisible="1"
						styleClass="products-reduce-commandHistory"
						headerText="List of commands" itemStyle="width:723px">
						<center>
							<strong class="price">Number of Items:</strong>
							#{c.getClientProducts().size()} <br /> <strong class="price">Total
								price:</strong> #{CommandBean.getTotalPrice(c)}$

						</center>
						<strong class="price">Status</strong>
							#{c.command_status.status}
						<br />
						<strong class="price">List of products</strong>
						<p:dataGrid var="p"
							value="#{CommandBean.getClientProductsForCommand(c)}" columns="3"
							rows="3" paginator="true" paginatorPosition="bottom">
							<center>
								<p:graphicImage
									url="http://localhost:8080/Shop4j/rest/products/id#{p.product.productcolor.id}"
									width="170" height="190" />
								<br />
								<div class="price">
									<p:outputLabel value="-#{p.percRedution}%"
										rendered="#{p.percRedution != 0.0}"></p:outputLabel>
								</div>
								<h3>#{internationalizationProduct.productName}</h3>
								<p:outputLabel value="#{p.product.productcolor.product.name}"></p:outputLabel>
								<br /> <br /> <strong class="price">#{internationalizationProduct.price}</strong>
								<p:outputLabel value="#{p.price}$"
									rendered="#{p.percRedution == 0.0}"></p:outputLabel>
								<p:outputLabel value="#{p.price}$"
									rendered="#{p.percRedution != 0.0}"
									style="text-decoration:line-through;"></p:outputLabel>
								<br />
								<p:outputLabel
									value="#{p.price - p.price * p.percRedution / 100}$"
									rendered="#{p.percRedution != 0.0}"></p:outputLabel>
								<strong class="price">#{internationalizationProduct.nrPieces}</strong>
								#{p.nrPieces}
							</center>
						</p:dataGrid>
						<br />
						<center>
							<p:commandButton
								disabled="#{CommandBean.canBeReturned(c) == false}"
								value="#{internationalizationCart.returnCommand}"
								style="background: #8b0000;color: #fff;"></p:commandButton>
						</center>
						<br />
					</p:carousel>
					<br />
				</center>
				<p:outputLabel value="#{internationalizationCart.noRecords}"
					rendered="#{!CommandBean.existCommands}"></p:outputLabel>
				<br />
				<br />
				<br />
			</h:form>
		</ui:define>

		<ui:define name="advertise">
			<ui:include src="/resources/template/advertise.xhtml"></ui:include>
		</ui:define>

		<ui:define name="footer">
			<ui:include src="/resources/template/footer.xhtml"></ui:include>
		</ui:define>
	</ui:composition>

</h:body>

</html>